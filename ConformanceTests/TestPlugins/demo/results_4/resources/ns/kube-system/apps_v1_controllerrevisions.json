[{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"component":"kube-proxy","tier":"node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"}]}]}}},"containers":[{"command":["/hyperkube","kube-proxy","--kubeconfig=/var/lib/kubelet/kubeconfig","--cluster-cidr=10.244.0.0/16","--v=3"],"image":"mcr.microsoft.com/oss/kubernetes/hyperkube:v1.18.2.1","imagePullPolicy":"IfNotPresent","name":"kube-proxy","resources":{"requests":{"cpu":"100m"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/var/lib/kubelet","name":"kubeconfig","readOnly":true},{"mountPath":"/etc/kubernetes/certs","name":"certificates","readOnly":true},{"mountPath":"/run/xtables.lock","name":"iptableslock"}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"nodeSelector":{"beta.kubernetes.io/os":"linux"},"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"kube-proxy","serviceAccountName":"kube-proxy","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/var/lib/kubelet","type":""},"name":"kubeconfig"},{"hostPath":{"path":"/etc/kubernetes/certs","type":""},"name":"certificates"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"iptableslock"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"kube-proxy\",\"tier\":\"node\"},\"name\":\"kube-proxy\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"component\":\"kube-proxy\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":null,\"labels\":{\"component\":\"kube-proxy\",\"tier\":\"node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"labelSelector\":null,\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"}]}]}}},\"containers\":[{\"command\":[\"/hyperkube\",\"kube-proxy\",\"--kubeconfig=/var/lib/kubelet/kubeconfig\",\"--cluster-cidr=10.244.0.0/16\",\"--v=3\"],\"image\":\"mcr.microsoft.com/oss/kubernetes/hyperkube:v1.18.2.1\",\"name\":\"kube-proxy\",\"resources\":{\"requests\":{\"cpu\":\"100m\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/var/lib/kubelet\",\"name\":\"kubeconfig\",\"readOnly\":true},{\"mountPath\":\"/etc/kubernetes/certs\",\"name\":\"certificates\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"iptableslock\"}]}],\"hostNetwork\":true,\"nodeSelector\":{\"beta.kubernetes.io/os\":\"linux\"},\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"kube-proxy\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/var/lib/kubelet\"},\"name\":\"kubeconfig\"},{\"hostPath\":{\"path\":\"/etc/kubernetes/certs\"},\"name\":\"certificates\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"iptableslock\"}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":1},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2020-06-19T07:32:09Z","labels":{"component":"kube-proxy","controller-revision-hash":"7764fb9855","tier":"node"},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:component":{},"f:controller-revision-hash":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"9e499706-e60a-4649-9be3-aefedaa0e84d\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}},"manager":"kube-controller-manager","operation":"Update","time":"2020-06-19T07:32:09Z"}],"name":"kube-proxy-7764fb9855","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"kube-proxy","uid":"9e499706-e60a-4649-9be3-aefedaa0e84d"}],"resourceVersion":"414","selfLink":"/apis/apps/v1/namespaces/kube-system/controllerrevisions/kube-proxy-7764fb9855","uid":"9b7e09fd-63f5-4df9-9218-98d876c4c505"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"WSID":"MDhhMmZkNjEtODk1OS00NDUyLTgxMmUtZTNlNTY0ZjA4OWQz","agentVersion":"1.10.0.1","dockerProviderVersion":"8.0.0-3","schema-versions":"v1"},"creationTimestamp":null,"labels":{"component":"oms-agent","tier":"node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]}]}]}}},"containers":[{"env":[{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"AKS_CLUSTER_NAME","value":"akkesharaks2"},{"name":"AKS_RESOURCE_ID","value":"/subscriptions/1bfbb5d0-917e-4346-9026-1d3b344417f5/resourceGroups/akkeshar-test2/providers/Microsoft.ContainerService/managedClusters/akkesharaks2"},{"name":"AKS_NODE_RESOURCE_GROUP","value":"MC_akkeshar-test2_akkesharaks2_westeurope"},{"name":"AKS_REGION","value":"westeurope"},{"name":"CONTROLLER_TYPE","value":"DaemonSet"},{"name":"USER_ASSIGNED_IDENTITY_CLIENT_ID"}],"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod03022020","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/bin/bash","-c","/opt/livenessprobe.sh"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":60,"successThreshold":1,"timeoutSeconds":1},"name":"omsagent","ports":[{"containerPort":25225,"protocol":"TCP"},{"containerPort":25224,"protocol":"UDP"}],"resources":{"limits":{"cpu":"150m","memory":"600Mi"},"requests":{"cpu":"75m","memory":"225Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/hostfs","name":"host-root","readOnly":true},{"mountPath":"/var/run/host","name":"docker-sock"},{"mountPath":"/var/log","name":"host-log"},{"mountPath":"/var/lib/docker/containers","name":"containerlog-path"},{"mountPath":"/etc/kubernetes/host","name":"azure-json-path"},{"mountPath":"/etc/omsagent-secret","name":"omsagent-secret"},{"mountPath":"/etc/config/settings","name":"settings-vol-config","readOnly":true}]}],"dnsPolicy":"ClusterFirst","nodeSelector":{"beta.kubernetes.io/os":"linux"},"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"omsagent","serviceAccountName":"omsagent","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"effect":"PreferNoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/","type":""},"name":"host-root"},{"hostPath":{"path":"/var/run","type":""},"name":"docker-sock"},{"hostPath":{"path":"/etc/hostname","type":""},"name":"container-hostname"},{"hostPath":{"path":"/var/log","type":""},"name":"host-log"},{"hostPath":{"path":"/var/lib/docker/containers","type":""},"name":"containerlog-path"},{"hostPath":{"path":"/etc/kubernetes","type":""},"name":"azure-json-path"},{"name":"omsagent-secret","secret":{"defaultMode":420,"secretName":"omsagent-secret"}},{"configMap":{"defaultMode":420,"name":"container-azm-ms-agentconfig","optional":true},"name":"settings-vol-config"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"oms-agent\",\"kubernetes.io/cluster-service\":\"true\",\"tier\":\"node\"},\"name\":\"omsagent\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"component\":\"oms-agent\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":{\"WSID\":\"MDhhMmZkNjEtODk1OS00NDUyLTgxMmUtZTNlNTY0ZjA4OWQz\",\"agentVersion\":\"1.10.0.1\",\"dockerProviderVersion\":\"8.0.0-3\",\"schema-versions\":\"v1\"},\"labels\":{\"component\":\"oms-agent\",\"tier\":\"node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]}]}]}}},\"containers\":[{\"env\":[{\"name\":\"NODE_IP\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"status.hostIP\"}}},{\"name\":\"AKS_CLUSTER_NAME\",\"value\":\"akkesharaks2\"},{\"name\":\"AKS_RESOURCE_ID\",\"value\":\"/subscriptions/1bfbb5d0-917e-4346-9026-1d3b344417f5/resourceGroups/akkeshar-test2/providers/Microsoft.ContainerService/managedClusters/akkesharaks2\"},{\"name\":\"AKS_NODE_RESOURCE_GROUP\",\"value\":\"MC_akkeshar-test2_akkesharaks2_westeurope\"},{\"name\":\"AKS_REGION\",\"value\":\"westeurope\"},{\"name\":\"CONTROLLER_TYPE\",\"value\":\"DaemonSet\"},{\"name\":\"USER_ASSIGNED_IDENTITY_CLIENT_ID\",\"value\":\"\"}],\"image\":\"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod03022020\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/bin/bash\",\"-c\",\"/opt/livenessprobe.sh\"]},\"initialDelaySeconds\":60,\"periodSeconds\":60},\"name\":\"omsagent\",\"ports\":[{\"containerPort\":25225,\"protocol\":\"TCP\"},{\"containerPort\":25224,\"protocol\":\"UDP\"}],\"resources\":{\"limits\":{\"cpu\":\"150m\",\"memory\":\"600Mi\"},\"requests\":{\"cpu\":\"75m\",\"memory\":\"225Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/hostfs\",\"name\":\"host-root\",\"readOnly\":true},{\"mountPath\":\"/var/run/host\",\"name\":\"docker-sock\"},{\"mountPath\":\"/var/log\",\"name\":\"host-log\"},{\"mountPath\":\"/var/lib/docker/containers\",\"name\":\"containerlog-path\"},{\"mountPath\":\"/etc/kubernetes/host\",\"name\":\"azure-json-path\"},{\"mountPath\":\"/etc/omsagent-secret\",\"name\":\"omsagent-secret\"},{\"mountPath\":\"/etc/config/settings\",\"name\":\"settings-vol-config\",\"readOnly\":true}]}],\"nodeSelector\":{\"beta.kubernetes.io/os\":\"linux\"},\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"omsagent\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"effect\":\"PreferNoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/\"},\"name\":\"host-root\"},{\"hostPath\":{\"path\":\"/var/run\"},\"name\":\"docker-sock\"},{\"hostPath\":{\"path\":\"/etc/hostname\"},\"name\":\"container-hostname\"},{\"hostPath\":{\"path\":\"/var/log\"},\"name\":\"host-log\"},{\"hostPath\":{\"path\":\"/var/lib/docker/containers\"},\"name\":\"containerlog-path\"},{\"hostPath\":{\"path\":\"/etc/kubernetes\"},\"name\":\"azure-json-path\"},{\"name\":\"omsagent-secret\",\"secret\":{\"secretName\":\"omsagent-secret\"}},{\"configMap\":{\"name\":\"container-azm-ms-agentconfig\",\"optional\":true},\"name\":\"settings-vol-config\"}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":\"50%\"},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2020-06-19T07:32:08Z","labels":{"component":"oms-agent","controller-revision-hash":"5d9bd9c666","tier":"node"},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:component":{},"f:controller-revision-hash":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6d27336f-5747-4240-b308-0f9e3637d17a\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}},"manager":"kube-controller-manager","operation":"Update","time":"2020-06-19T07:32:08Z"}],"name":"omsagent-5d9bd9c666","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"omsagent","uid":"6d27336f-5747-4240-b308-0f9e3637d17a"}],"resourceVersion":"367","selfLink":"/apis/apps/v1/namespaces/kube-system/controllerrevisions/omsagent-5d9bd9c666","uid":"853e04bf-50ef-4255-b6dc-2064214efaa6"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"WSID":"MDhhMmZkNjEtODk1OS00NDUyLTgxMmUtZTNlNTY0ZjA4OWQz","agentVersion":"1.10.0.1","dockerProviderVersion":"10.0.0-1","schema-versions":"v1"},"creationTimestamp":null,"labels":{"component":"oms-agent","tier":"node"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"beta.kubernetes.io/os","operator":"In","values":["linux"]},{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]}]}]}}},"containers":[{"env":[{"name":"NODE_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.hostIP"}}},{"name":"AKS_CLUSTER_NAME","value":"akkesharaks2"},{"name":"AKS_RESOURCE_ID","value":"/subscriptions/1bfbb5d0-917e-4346-9026-1d3b344417f5/resourceGroups/akkeshar-test2/providers/Microsoft.ContainerService/managedClusters/akkesharaks2"},{"name":"AKS_NODE_RESOURCE_GROUP","value":"MC_akkeshar-test2_akkesharaks2_westeurope"},{"name":"AKS_REGION","value":"westeurope"},{"name":"CONTROLLER_TYPE","value":"DaemonSet"},{"name":"USER_ASSIGNED_IDENTITY_CLIENT_ID"}],"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod05262020","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/bin/bash","-c","/opt/livenessprobe.sh"]},"failureThreshold":3,"initialDelaySeconds":60,"periodSeconds":60,"successThreshold":1,"timeoutSeconds":1},"name":"omsagent","ports":[{"containerPort":25225,"protocol":"TCP"},{"containerPort":25224,"protocol":"UDP"}],"resources":{"limits":{"cpu":"150m","memory":"600Mi"},"requests":{"cpu":"75m","memory":"225Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/hostfs","name":"host-root","readOnly":true},{"mountPath":"/var/run/host","name":"docker-sock"},{"mountPath":"/var/log","name":"host-log"},{"mountPath":"/var/lib/docker/containers","name":"containerlog-path"},{"mountPath":"/etc/kubernetes/host","name":"azure-json-path"},{"mountPath":"/etc/omsagent-secret","name":"omsagent-secret"},{"mountPath":"/etc/config/settings","name":"settings-vol-config","readOnly":true}]}],"dnsPolicy":"ClusterFirst","priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"omsagent","serviceAccountName":"omsagent","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"effect":"PreferNoSchedule","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/","type":""},"name":"host-root"},{"hostPath":{"path":"/var/run","type":""},"name":"docker-sock"},{"hostPath":{"path":"/etc/hostname","type":""},"name":"container-hostname"},{"hostPath":{"path":"/var/log","type":""},"name":"host-log"},{"hostPath":{"path":"/var/lib/docker/containers","type":""},"name":"containerlog-path"},{"hostPath":{"path":"/etc/kubernetes","type":""},"name":"azure-json-path"},{"name":"omsagent-secret","secret":{"defaultMode":420,"secretName":"omsagent-secret"}},{"configMap":{"defaultMode":420,"name":"container-azm-ms-agentconfig","optional":true},"name":"settings-vol-config"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"2","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"oms-agent\",\"kubernetes.io/cluster-service\":\"true\",\"tier\":\"node\"},\"name\":\"omsagent\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"component\":\"oms-agent\",\"tier\":\"node\"}},\"template\":{\"metadata\":{\"annotations\":{\"WSID\":\"MDhhMmZkNjEtODk1OS00NDUyLTgxMmUtZTNlNTY0ZjA4OWQz\",\"agentVersion\":\"1.10.0.1\",\"dockerProviderVersion\":\"10.0.0-1\",\"schema-versions\":\"v1\"},\"labels\":{\"component\":\"oms-agent\",\"tier\":\"node\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"beta.kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"linux\"]},{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]}]}]}}},\"containers\":[{\"env\":[{\"name\":\"NODE_IP\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"status.hostIP\"}}},{\"name\":\"AKS_CLUSTER_NAME\",\"value\":\"akkesharaks2\"},{\"name\":\"AKS_RESOURCE_ID\",\"value\":\"/subscriptions/1bfbb5d0-917e-4346-9026-1d3b344417f5/resourceGroups/akkeshar-test2/providers/Microsoft.ContainerService/managedClusters/akkesharaks2\"},{\"name\":\"AKS_NODE_RESOURCE_GROUP\",\"value\":\"MC_akkeshar-test2_akkesharaks2_westeurope\"},{\"name\":\"AKS_REGION\",\"value\":\"westeurope\"},{\"name\":\"CONTROLLER_TYPE\",\"value\":\"DaemonSet\"},{\"name\":\"USER_ASSIGNED_IDENTITY_CLIENT_ID\",\"value\":\"\"}],\"image\":\"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:ciprod05262020\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"/bin/bash\",\"-c\",\"/opt/livenessprobe.sh\"]},\"initialDelaySeconds\":60,\"periodSeconds\":60},\"name\":\"omsagent\",\"ports\":[{\"containerPort\":25225,\"protocol\":\"TCP\"},{\"containerPort\":25224,\"protocol\":\"UDP\"}],\"resources\":{\"limits\":{\"cpu\":\"150m\",\"memory\":\"600Mi\"},\"requests\":{\"cpu\":\"75m\",\"memory\":\"225Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/hostfs\",\"name\":\"host-root\",\"readOnly\":true},{\"mountPath\":\"/var/run/host\",\"name\":\"docker-sock\"},{\"mountPath\":\"/var/log\",\"name\":\"host-log\"},{\"mountPath\":\"/var/lib/docker/containers\",\"name\":\"containerlog-path\"},{\"mountPath\":\"/etc/kubernetes/host\",\"name\":\"azure-json-path\"},{\"mountPath\":\"/etc/omsagent-secret\",\"name\":\"omsagent-secret\"},{\"mountPath\":\"/etc/config/settings\",\"name\":\"settings-vol-config\",\"readOnly\":true}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"omsagent\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"effect\":\"PreferNoSchedule\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/\"},\"name\":\"host-root\"},{\"hostPath\":{\"path\":\"/var/run\"},\"name\":\"docker-sock\"},{\"hostPath\":{\"path\":\"/etc/hostname\"},\"name\":\"container-hostname\"},{\"hostPath\":{\"path\":\"/var/log\"},\"name\":\"host-log\"},{\"hostPath\":{\"path\":\"/var/lib/docker/containers\"},\"name\":\"containerlog-path\"},{\"hostPath\":{\"path\":\"/etc/kubernetes\"},\"name\":\"azure-json-path\"},{\"name\":\"omsagent-secret\",\"secret\":{\"secretName\":\"omsagent-secret\"}},{\"configMap\":{\"name\":\"container-azm-ms-agentconfig\",\"optional\":true},\"name\":\"settings-vol-config\"}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":\"50%\"},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2020-06-29T17:12:13Z","labels":{"component":"oms-agent","controller-revision-hash":"6544f6b8d5","tier":"node"},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:component":{},"f:controller-revision-hash":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"6d27336f-5747-4240-b308-0f9e3637d17a\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}},"manager":"kube-controller-manager","operation":"Update","time":"2020-06-29T17:12:13Z"}],"name":"omsagent-6544f6b8d5","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"omsagent","uid":"6d27336f-5747-4240-b308-0f9e3637d17a"}],"resourceVersion":"3146359","selfLink":"/apis/apps/v1/namespaces/kube-system/controllerrevisions/omsagent-6544f6b8d5","uid":"f30594cf-ab62-4ef7-ac8d-126b97b49ce2"},"revision":2},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"annotations":{"WSID":"MDhhMmZkNjEtODk1OS00NDUyLTgxMmUtZTNlNTY0ZjA4OWQz","agentVersion":"1.10.0.1","dockerProviderVersion":"10.0.0-1","schema-versions":"v1"},"creationTimestamp":null,"labels":{"component":"oms-agent-win","kubernetes.azure.com/managedby":"aks","tier":"node-win"}},"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"kubernetes.azure.com/cluster","operator":"Exists"},{"key":"beta.kubernetes.io/os","operator":"In","values":["windows"]},{"key":"kubernetes.io/role","operator":"In","values":["agent"]},{"key":"type","operator":"NotIn","values":["virtual-kubelet"]}]}]}}},"containers":[{"env":[{"name":"AKS_RESOURCE_ID","value":"/subscriptions/1bfbb5d0-917e-4346-9026-1d3b344417f5/resourceGroups/akkeshar-test2/providers/Microsoft.ContainerService/managedClusters/akkesharaks2"},{"name":"AKS_REGION","value":"westeurope"},{"name":"CONTROLLER_TYPE","value":"DaemonSet"},{"name":"HOSTNAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:win-ciprod05262020-2","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["cmd","/c","C:\\opt\\omsagentwindows\\scripts\\cmd\\livenessProbe.cmd"]},"failureThreshold":3,"initialDelaySeconds":180,"periodSeconds":60,"successThreshold":1,"timeoutSeconds":1},"name":"omsagent-win","resources":{"limits":{"cpu":"150m","memory":"600Mi"},"requests":{"cpu":"75m","memory":"225Mi"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"C:\\ProgramData\\docker\\containers","name":"docker-windows-containers","readOnly":true},{"mountPath":"C:\\var","name":"docker-windows-kuberenetes-container-logs"},{"mountPath":"C:\\etc\\config\\settings","name":"settings-vol-config","readOnly":true},{"mountPath":"C:\\etc\\omsagent-secret","name":"omsagent-secret","readOnly":true}]}],"dnsPolicy":"ClusterFirst","priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"omsagent","serviceAccountName":"omsagent","terminationGracePeriodSeconds":30,"volumes":[{"hostPath":{"path":"C:\\var","type":""},"name":"docker-windows-kuberenetes-container-logs"},{"hostPath":{"path":"C:\\ProgramData\\docker\\containers","type":""},"name":"docker-windows-containers"},{"configMap":{"defaultMode":420,"name":"container-azm-ms-agentconfig","optional":true},"name":"settings-vol-config"},{"name":"omsagent-secret","secret":{"defaultMode":420,"secretName":"omsagent-secret"}}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"component\":\"oms-agent-win\",\"kubernetes.io/cluster-service\":\"true\",\"tier\":\"node-win\"},\"name\":\"omsagent-win\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"component\":\"oms-agent-win\",\"tier\":\"node-win\"}},\"template\":{\"metadata\":{\"annotations\":{\"WSID\":\"MDhhMmZkNjEtODk1OS00NDUyLTgxMmUtZTNlNTY0ZjA4OWQz\",\"agentVersion\":\"1.10.0.1\",\"dockerProviderVersion\":\"10.0.0-1\",\"schema-versions\":\"v1\"},\"labels\":{\"component\":\"oms-agent-win\",\"kubernetes.azure.com/managedby\":\"aks\",\"tier\":\"node-win\"}},\"spec\":{\"affinity\":{\"nodeAffinity\":{\"requiredDuringSchedulingIgnoredDuringExecution\":{\"nodeSelectorTerms\":[{\"matchExpressions\":[{\"key\":\"kubernetes.azure.com/cluster\",\"operator\":\"Exists\"},{\"key\":\"beta.kubernetes.io/os\",\"operator\":\"In\",\"values\":[\"windows\"]},{\"key\":\"kubernetes.io/role\",\"operator\":\"In\",\"values\":[\"agent\"]},{\"key\":\"type\",\"operator\":\"NotIn\",\"values\":[\"virtual-kubelet\"]}]}]}}},\"containers\":[{\"env\":[{\"name\":\"AKS_RESOURCE_ID\",\"value\":\"/subscriptions/1bfbb5d0-917e-4346-9026-1d3b344417f5/resourceGroups/akkeshar-test2/providers/Microsoft.ContainerService/managedClusters/akkesharaks2\"},{\"name\":\"AKS_REGION\",\"value\":\"westeurope\"},{\"name\":\"CONTROLLER_TYPE\",\"value\":\"DaemonSet\"},{\"name\":\"HOSTNAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"mcr.microsoft.com/azuremonitor/containerinsights/ciprod:win-ciprod05262020-2\",\"imagePullPolicy\":\"IfNotPresent\",\"livenessProbe\":{\"exec\":{\"command\":[\"cmd\",\"/c\",\"C:\\\\opt\\\\omsagentwindows\\\\scripts\\\\cmd\\\\livenessProbe.cmd\"]},\"initialDelaySeconds\":180,\"periodSeconds\":60},\"name\":\"omsagent-win\",\"resources\":{\"limits\":{\"cpu\":\"150m\",\"memory\":\"600Mi\"},\"requests\":{\"cpu\":\"75m\",\"memory\":\"225Mi\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"C:\\\\ProgramData\\\\docker\\\\containers\",\"name\":\"docker-windows-containers\",\"readOnly\":true},{\"mountPath\":\"C:\\\\var\",\"name\":\"docker-windows-kuberenetes-container-logs\"},{\"mountPath\":\"C:\\\\etc\\\\config\\\\settings\",\"name\":\"settings-vol-config\",\"readOnly\":true},{\"mountPath\":\"C:\\\\etc\\\\omsagent-secret\",\"name\":\"omsagent-secret\",\"readOnly\":true}]}],\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"omsagent\",\"volumes\":[{\"hostPath\":{\"path\":\"C:\\\\var\"},\"name\":\"docker-windows-kuberenetes-container-logs\"},{\"hostPath\":{\"path\":\"C:\\\\ProgramData\\\\docker\\\\containers\"},\"name\":\"docker-windows-containers\"},{\"configMap\":{\"name\":\"container-azm-ms-agentconfig\",\"optional\":true},\"name\":\"settings-vol-config\"},{\"name\":\"omsagent-secret\",\"secret\":{\"secretName\":\"omsagent-secret\"}}]}},\"updateStrategy\":{\"rollingUpdate\":{\"maxUnavailable\":\"50%\"},\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2020-06-29T17:12:13Z","labels":{"component":"oms-agent-win","controller-revision-hash":"59c6dbcd45","kubernetes.azure.com/managedby":"aks","tier":"node-win"},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:component":{},"f:controller-revision-hash":{},"f:kubernetes.azure.com/managedby":{},"f:tier":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"07fc5265-5693-43b9-ae0a-0d182f69111b\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}},"manager":"kube-controller-manager","operation":"Update","time":"2020-06-29T17:12:13Z"}],"name":"omsagent-win-59c6dbcd45","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"omsagent-win","uid":"07fc5265-5693-43b9-ae0a-0d182f69111b"}],"resourceVersion":"3146378","selfLink":"/apis/apps/v1/namespaces/kube-system/controllerrevisions/omsagent-win-59c6dbcd45","uid":"1c35bd24-e205-4ec2-bf94-025d39b0a9d6"},"revision":1}]